<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Jobs and Tasks in Rails — Backend Development</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

  <link rel="stylesheet" type="text/css" href="stylesheets/code.css" />
  
  <link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <style>

    .slide img[src$=svg] {
      width: 100%;
    }
  </style>
</head>
<body class="guide">
  <div>
    <a href="https://github.com/backend-development/backend-development-textbook/"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="images/forkme.png" alt="Fork me on GitHub"></a>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More Rails: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Rails Guides</a></li>
        <li class="more-info"><a href="https://curriculum.railsbridge.org/docs/">Railsbridge</a></li>
        <li class="more-info"><a href="https://archive.org/details/podcast_railscasts_218282043">Railscasts</a></li>
      </ul>
      <strong class="more-info-label">Beyond Backend: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://web-engineering.github.io/">Web Engineering</a></li>
      </ul>      
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Backend<span> Development</span></a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu" class="guides-index-item nav-item">Index  &#x25BC;</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Ruby on Rails</dt>
                <dd><a href="ruby_commandline.html">Ruby Commandline</a></dd>
                <dd><a href="rails_database_and_model.html">Database and Models</a></dd>
                <dd><a href="rails_associations_and_validations.html">Associations and Validations</a></dd>
                <dd><a href="rails_view_and_controller.html">Routing, View and Controller</a></dd>
                <dd><a href="rails_authentication.html">Simple Authentication</a></dd>
                <dd><a href="assets_and_webpacker.html">Assets and Webpacker</a></dd>
                <dd><a href="javascript_and_ajax.html">Javascript and Rails</a></dd>
                <dd><a href="testing.html">Getting started with Testing</a></dd>
                <dd><a href="rails_gems.html">Ruby Gems for your Rails Project</a></dd>
                <dd><a href="rest-api.html">REST API</a></dd>
                <dd><a href="graphql-api.html">GraphQL API</a></dd>
                <dd><a href="rails_websockets.html">Websocket in Rails</a></dd>
                <dd><a href="jobs_and_tasks.html">Jobs and Tasks in Rails</a></dd>
                <dd><a href="refactoring_rails.html">Refactoring Rails</a></dd>
                <dt>Overarching Concerns</dt>
                <dd><a href="security.html">Security</a></dd>
                <dd><a href="adv_authentication.html">Advanced Authentication</a></dd>
                <dd><a href="caching.html">Caching</a></dd>
                <dd><a href="advanced_testing.html">Advanced Testing</a></dd>
                <dd><a href="internationalization.html">Internationalization (I18n)</a></dd>
                <dt>Nodes.js</dt>
                <dd><a href="node_vs_rails.html">Node vs. Rails</a></dd>
                <dd><a href="node_basics.html">Node Basics</a></dd>
                <dd><a href="node_websockets.html">Node Websockets</a></dd>
                <dd><a href="node_express.html">Node Web App</a></dd>
                <dd><a href="node_cluster.html">Scaling Node</a></dd>
              </dl>
              <dl class="R">
              </dl>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2 id="preheader">Jobs and Tasks in Rails</h2>
                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#http-request-response-cycle">HTTP Request-Response Cycle</a></li>
<li>
<a href="#tasks">Tasks</a>

<ul>
<li><a href="#what-is-a-task-questionmark">What is a task?</a></li>
<li><a href="#how-do-i-generate-a-task-questionmark">How do I generate a task?</a></li>
<li><a href="#how-can-i-supply-command-line-arguments-questionmark">How can I supply command line arguments?</a></li>
<li><a href="#how-do-i-implement-my-task-questionmark">How do I implement my task?</a></li>
<li><a href="#scheduling-tasks-on-unix">Scheduling Tasks on UNIX</a></li>
<li><a href="#other-task-runners">Other Task Runners</a></li>
</ul>
</li>
<li>
<a href="#jobs">Jobs</a>

<ul>
<li><a href="#what-is-a-job-questionmark">What is a job?</a></li>
<li><a href="#how-do-i-generate-a-job-questionmark">How do I generate a job?</a></li>
<li><a href="#how-can-i-start-a-job-later-questionmark">How can I start a job - later?</a></li>
<li><a href="#how-can-i-supply-arguments-questionmark">How can I supply arguments?</a></li>
<li><a href="#how-do-i-send-e-mail-later-questionmark">How do I send E-Mail - later?</a></li>
<li><a href="#how-do-i-configure-a-queuing-backend-questionmark">How do I configure a queuing backend?</a></li>
</ul>
</li>
<li><a href="#beyond-tasks-and-jobs">Beyond Tasks and Jobs</a></li>
</ol>

          </div>

      <div class="rest_header">
        <h2>Jobs and Tasks in Rails</h2><p>Your web application will need code that
is  run outside the HTTP Request-Response cycle.</p><p>By referring to this guide, you will be able to:</p>
<ul>
<li>Implement tasks that you can start from the commandline</li>
<li>Implement jobs that are run automatically, but asyncronously</li>
</ul>

      </div>
    </div>
  </div>


  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <div class='slide'><a id='slide-0'></a>
</div>
<div class='slide'>
<a class='slide_break' id='slide-1' href='slides_jobs_and_tasks.html#slide-1'>▻</a>
<h3 id="http-request-response-cycle"><a class="anchorlink" href="#http-request-response-cycle">1 HTTP Request-Response Cycle</a></h3><p>A backend web frameworks normally works within the HTTP Request-Response Cyle.
In a Ruby on Rails app the flow is like this:</p>
<ol>
<li>a HTTP Request comes in</li>
<li>the router deciphers the URL, decides which controller to call</li>
<li>the controller handles HTTP Parameters, Cookies, Session Data,

<ol>
<li>loads models from the database</li>
<li>decides which view to call</li>
<li>sets headers for the HTTP response</li>
<li>renders the view</li>
</ol>
</li>
<li>a HTTP Response is sent</li>
</ol>
<p>This should take less than 500ms from start to finish if
we want to achive a good response time for our users.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-2' href='slides_jobs_and_tasks.html#slide-2'>▻</a>
<p>But some code we write is different:
it might not fit within this
timeframe.  or it might not be triggered by a HTTP request.</p><p>Some examples:</p>
<ul>
<li>convert uploaded media (images, movies) to different file formats or sizes</li>
<li>send out e-mails</li>
<li>delete data according to GDPR</li>
<li>batch import data to your app</li>
</ul>
</div>
<div class='slide'>
<a class='slide_break' id='slide-3' href='slides_jobs_and_tasks.html#slide-3'>▻</a>
<h3 id="tasks"><a class="anchorlink" href="#tasks">2 Tasks</a></h3></div>
<div class='slide'>
<a class='slide_break' id='slide-4' href='slides_jobs_and_tasks.html#slide-4'>▻</a>
<h4 id="what-is-a-task-questionmark"><a class="anchorlink" href="#what-is-a-task-questionmark">2.1 What is a task?</a></h4><p>In a Rails App <strong>tasks</strong> are small programs you - as the developer - can start on the command line.</p><p>You have already used some predefined tasks:</p><div class="code_container">
<pre><code class="highlight shell"><span class="nv">$ </span><span class="nb">rails </span>db:migrate
<span class="nv">$ </span><span class="nb">rails test</span>
</code></pre>
</div>
<p>You can get a list of all available tasks with <code>rails -T</code>.</p><p>When you deploy your app to a PAAS like heroku or dokku you can
start a task on the server using the command line:</p><div class="code_container">
<pre><code class="highlight shell"><span class="nv">$ </span>dokku run <span class="nb">rails </span>db:migrate
<span class="nv">$ </span>heroku run <span class="nb">rails </span>db:migrate
</code></pre>
</div>
<p>A task can have access to  your application models, perform database queries, and so on.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-5' href='slides_jobs_and_tasks.html#slide-5'>▻</a>
<h4 id="how-do-i-generate-a-task-questionmark"><a class="anchorlink" href="#how-do-i-generate-a-task-questionmark">2.2 How do I generate a task?</a></h4><p>Use <code>rails generate</code> to start writing a task.  For example I want to write
a task that loads user data from ActiveDirectory:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="err">$</span> <span class="n">rails</span> <span class="n">generate</span> <span class="n">task</span> <span class="n">active_directory</span> <span class="nb">load</span>
      <span class="n">create</span>  <span class="n">lib</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">active_directory</span><span class="p">.</span><span class="nf">rake</span>
</code></pre>
</div>
<p>This will create a file <code>lib/tasks/active_directory.rake</code></p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">namespace</span> <span class="ss">:active_directory</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"add your description here"</span>
  <span class="n">task</span> <span class="ss">load: :environment</span> <span class="k">do</span>
    <span class="c1"># add your code here</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre>
</div>
<p>This task can be started by running <code>rails active_directory:load</code>.
Notice how the namespace defined in the first line and the taskname defined in the
third line are combined when you call the task on the commandline.</p><p>The description defined with <code>desc</code>  is displayed when you run <code>rails -T</code>.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-6' href='slides_jobs_and_tasks.html#slide-6'>▻</a>
<h4 id="how-can-i-supply-command-line-arguments-questionmark"><a class="anchorlink" href="#how-can-i-supply-command-line-arguments-questionmark">2.3 How can I supply command line arguments?</a></h4><p>The task to load data from ActiveDirectory needs arguments.</p><p>The Syntax for arguments is a bit strange: the
arguments need to be supplied in square brackets after the taskname without any spaces:</p><div class="code_container">
<pre><code class="highlight shell"><span class="nv">$ </span><span class="nb">rails </span>active_directory:load[username]
<span class="nv">$ </span><span class="nb">rails </span>active_directory:load[username1,username2,username3]
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-7' href='slides_jobs_and_tasks.html#slide-7'>▻</a>
<p>You can give the arguments names and handle them as a hash, an array,
or as separate values.</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="n">task</span> <span class="ss">:load</span><span class="p">,</span> <span class="p">[</span><span class="ss">:a</span><span class="p">,</span> <span class="ss">:b</span><span class="p">,</span> <span class="ss">:c</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="ss">:environment</span> <span class="k">do</span> <span class="o">|</span><span class="n">task</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="s2">"arguments as a hash: </span><span class="si">#{</span><span class="n">args</span><span class="p">.</span><span class="nf">to_h</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"arguments as an array: </span><span class="si">#{</span><span class="n">args</span><span class="p">.</span><span class="nf">to_a</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"arguments by position: </span><span class="si">#{</span><span class="n">args</span><span class="p">.</span><span class="nf">a</span><span class="si">}</span><span class="s2"> and </span><span class="si">#{</span><span class="n">args</span><span class="p">.</span><span class="nf">b</span><span class="si">}</span><span class="s2"> and </span><span class="si">#{</span><span class="n">args</span><span class="p">.</span><span class="nf">c</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
</code></pre>
</div>
<p>The code above can be run like so:</p><div class="code_container">
<pre><code class="highlight shell"><span class="nv">$ </span><span class="nb">rails </span>active_directory:load[1,2,3]
arguments as a <span class="nb">hash</span>: <span class="o">{</span>:a<span class="o">=&gt;</span><span class="s2">"1"</span>, :b<span class="o">=&gt;</span><span class="s2">"2"</span>, :c<span class="o">=&gt;</span><span class="s2">"3"</span><span class="o">}</span>
arguments as an array: <span class="o">[</span><span class="s2">"1"</span>, <span class="s2">"2"</span>, <span class="s2">"3"</span><span class="o">]</span>
arguments by position: 1 and 2 and 3
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-8' href='slides_jobs_and_tasks.html#slide-8'>▻</a>
<h4 id="how-do-i-implement-my-task-questionmark"><a class="anchorlink" href="#how-do-i-implement-my-task-questionmark">2.4 How do I implement my task?</a></h4><p>You can use all your knowledge of ruby, and all the code in your web
application.  To finish the taks we can use an already existing
<code>User</code> model and a <code>ActiveDirectoryLookup</code> service object.</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="n">task</span> <span class="ss">:load</span><span class="p">,</span> <span class="p">[</span><span class="ss">:username</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="ss">:environment</span> <span class="k">do</span> <span class="o">|</span><span class="n">task</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="no">ActiveDirectoryLookup</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">args</span><span class="p">.</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">username</span><span class="o">|</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">ad</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="nf">nil?</span>
        <span class="nb">puts</span> <span class="s2">"Could not find user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> in ActiveDiretory"</span>
      <span class="k">else</span>
        <span class="n">u</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_or_create_with_ldap</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="nb">puts</span> <span class="s2">"user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> is local user </span><span class="si">#{</span><span class="n">u</span><span class="si">}</span><span class="s2">"</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-9' href='slides_jobs_and_tasks.html#slide-9'>▻</a>
<h4 id="scheduling-tasks-on-unix"><a class="anchorlink" href="#scheduling-tasks-on-unix">2.5 Scheduling Tasks on UNIX</a></h4><p>On <strong>UNIX</strong> Systems you can use <code>cron</code> to schedule tasks.</p><p>Use <code>crontab -e</code> to edit the cron table.  It is a plain text.
The first 5 entries in the table specify the time:</p><div class="code_container">
<pre><code class="highlight plaintext"># ┌───────────── minute (0 - 59)
# │ ┌───────────── hour (0 - 23)
# │ │ ┌───────────── day of the month (1 - 31)
# │ │ │ ┌───────────── month (1 - 12)
# │ │ │ │ ┌───────────── day of the week (0 - 6) (Sunday to Saturday;
# │ │ │ │ │                                   7 is also Sunday on some systems)
# │ │ │ │ │
# │ │ │ │ │
# * * * * * &lt;command to execute&gt;
</code></pre>
</div>
<p>In the following example the backup script is run at 10 past midnight
every day:</p><div class="code_container">
<pre><code class="highlight plaintext">10 0 * * * /usr/local/bin/backup_script
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-10' href='slides_jobs_and_tasks.html#slide-10'>▻</a>
<h4 id="other-task-runners"><a class="anchorlink" href="#other-task-runners">2.6 Other Task Runners</a></h4><p>You can use <strong>npm</strong> as a task runner.
Edit <code>package.json</code> and add your tasks under the key <code>scripts</code>:</p><div class="code_container">
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"compress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zip -r src.zip src/"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<p>run the task through <code>npm run compress</code>.  This works very well for starting command line scripts
like build or cleanup steps, or running tests.</p><p>See <a href="https://docs.npmjs.com/cli/v6/using-npm/scripts">the npm documentation</a>.</p><p>In <strong>nest.js</strong> <a href="https://docs.nestjs.com/techniques/task-scheduling">task scheduling</a> is handled by node-cron.</p><p>In <strong>Laravel</strong> see <a href="https://laravel.com/docs/9.x/envoy">envoy</a>.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-11' href='slides_jobs_and_tasks.html#slide-11'>▻</a>
<h3 id="jobs"><a class="anchorlink" href="#jobs">3 Jobs</a></h3></div>
<div class='slide'>
<a class='slide_break' id='slide-12' href='slides_jobs_and_tasks.html#slide-12'>▻</a>
<h4 id="what-is-a-job-questionmark"><a class="anchorlink" href="#what-is-a-job-questionmark">3.1 What is a job?</a></h4><p>In a Rails App <strong>jobs</strong> are parts of your app that are not run within the
HTTP Request-Response cycle. They are also called <strong>background jobs</strong>.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-13' href='slides_jobs_and_tasks.html#slide-13'>▻</a>
<h4 id="how-do-i-generate-a-job-questionmark"><a class="anchorlink" href="#how-do-i-generate-a-job-questionmark">3.2 How do I generate a job?</a></h4><p>Use <code>rails generate</code> to get started:</p><div class="code_container">
<pre><code class="highlight shell"><span class="nv">$ </span><span class="nb">rails </span>generate job guests_cleanup
invoke  test_unit
create    <span class="nb">test</span>/jobs/guests_cleanup_job_test.rb
create  app/jobs/guests_cleanup_job.rb
</code></pre>
</div>
<p>As you can see a test is generated alongside the job itself.</p><p>Here's what a job looks like:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">GuestsCleanupJob</span> <span class="o">&lt;</span> <span class="no">ApplicationJob</span>
  <span class="n">queue_as</span> <span class="ss">:default</span>

  <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="c1"># Do something later</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-14' href='slides_jobs_and_tasks.html#slide-14'>▻</a>
<h4 id="how-can-i-start-a-job-later-questionmark"><a class="anchorlink" href="#how-can-i-start-a-job-later-questionmark">3.3 How can I start a job - later?</a></h4><p>Somwehere in your rails app, for example in a controller, you can set the job up like this:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">GuestsCleanupJob</span><span class="p">.</span><span class="nf">perform_later</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</code></pre>
</div>
<p>The job will be peformed asynchronously - outside the HTTP Request-Response cycle.
Calling <code>perform_later</code> will take up almost no time.</p><p>You can also define a time when the job should be run:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">GuestsCleanupJob</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="ss">wait_until: </span><span class="no">Date</span><span class="p">.</span><span class="nf">tomorrow</span><span class="p">.</span><span class="nf">noon</span><span class="p">).</span><span class="nf">perform_later</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
<span class="no">GuestsCleanupJob</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="ss">wait: </span><span class="mi">1</span><span class="p">.</span><span class="nf">week</span><span class="p">).</span><span class="nf">perform_later</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-15' href='slides_jobs_and_tasks.html#slide-15'>▻</a>
<h4 id="how-can-i-supply-arguments-questionmark"><a class="anchorlink" href="#how-can-i-supply-arguments-questionmark">3.4 How can I supply arguments?</a></h4><p>You can define the argument list for <code>perform</code> any way you want.
The default is <code>*args</code> which captures all the arguments into an array <code>args</code>.</p><p>When calling <code>perform_later</code> you supply the arguments that will end up in <code>perform</code>.</p><p>You can only use primitive data types (Strings, Integers, Symbols, Date) as arguments for your job, but not Ruby Objects.</p><p>Why?  Because the Job is sent to a Queueing System for Storage. The data has to be serialized into a String, and deserialized again when it comes back to Rails.</p><p>The good news is: serialization and deserialization is automatically done for ActiveRecord models.
So you can use models as arguments.  But remember to implement de/serialization for any
other objects you want to use.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-16' href='slides_jobs_and_tasks.html#slide-16'>▻</a>
<h4 id="how-do-i-send-e-mail-later-questionmark"><a class="anchorlink" href="#how-do-i-send-e-mail-later-questionmark">3.5 How do I send E-Mail - later?</a></h4><p>When sending E-Mail from Rails you can specify if you want
to do it synchronously or asynchronously:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># If you want to send the email now use #deliver_now</span>
<span class="no">UserMailer</span><span class="p">.</span><span class="nf">welcome</span><span class="p">(</span><span class="vi">@user</span><span class="p">).</span><span class="nf">deliver_now</span>

<span class="c1"># If you want to send the email asynchronously through a Job use #deliver_later</span>
<span class="no">UserMailer</span><span class="p">.</span><span class="nf">welcome</span><span class="p">(</span><span class="vi">@user</span><span class="p">).</span><span class="nf">deliver_later</span>
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-17' href='slides_jobs_and_tasks.html#slide-17'>▻</a>
<h4 id="how-do-i-configure-a-queuing-backend-questionmark"><a class="anchorlink" href="#how-do-i-configure-a-queuing-backend-questionmark">3.6 How do I configure a queuing backend?</a></h4><p>In development you can use the default queuing system called <code>async</code>.
It's a poor fit for production since it drops pending jobs on restart.</p><p>For production you can chose another queuing backend, for example
<a href="https://github.com/bensheldon/good_job#set-up">GoodJob</a> which
uses the Postgres Database to store the jobs.</p></div>
<div class='slide'>
<a class='slide_break' id='slide-18' href='slides_jobs_and_tasks.html#slide-18'>▻</a>
<h3 id="beyond-tasks-and-jobs"><a class="anchorlink" href="#beyond-tasks-and-jobs">4 Beyond Tasks and Jobs</a></h3><p>Using Jobs is a first step towards a more complex software architecture.
We have been building Web Apps from different parts that communicate through
APIs. Both REST APIs and GraphQL APIs are synchronous.</p><p>Jobs and asynchronous work open up a new way of thinking of our application: it
could be built from several parts that send each other messages, but don't wait
for a response.</p></div>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p class="copyright">published under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> in 2012-2021 by <a href="https://brigitte-jellinek.at">Brigitte Jellinek</a>.
      </p><p>If you want to contribute: <a href="https://github.com/backend-development/backend-development-textbook/fork">fork the source on github</a>
      </p>
    </div>
  </div>

  <script src="javascripts/jquery.min.js"></script>
  <script src="javascripts/guides.js"></script>
  <script>
    SyntaxHighlighter.all()
    $(guidesIndex.bind);
    $(document).ready(function(){
      let hash = document.location.hash;
      if(! hash) return;
      document.getElementById(hash.substr(1)).scrollIntoView(true);
    })
  </script>
  </body>
</html>
