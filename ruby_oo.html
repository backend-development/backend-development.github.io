<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Backend Development Textbook</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

  <link rel="stylesheet" type="text/css" href="stylesheets/code.css" />

  <link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <style>

    .slide img[src$=svg] {
      width: 100%;
    }
  </style>
</head>
<body class="guide">
  <div>
    <a href="https://github.com/backend-development/backend-development-textbook/"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="images/forkme.png" alt="Fork me on GitHub"></a>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More Rails: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Rails Guides</a></li>
        <li class="more-info"><a href="https://railsbridge.projects.multimediatechnology.at/docs/">Railsbridge</a></li>
        <li class="more-info"><a href="https://archive.org/details/podcast_railscasts_218282043">Railscasts</a></li>
      </ul>
      <strong class="more-info-label">Beyond Backend: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://web-engineering.github.io/">Web Engineering</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Backend<span> Development</span></a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu" class="guides-index-item nav-item">Index  &#x25BC;</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Ruby on Rails</dt>
                <dd><a href="ruby_commandline.html">Ruby Commandline</a></dd>
                <dd><a href="rails_database_and_model.html">Models and ActiveRecord</a></dd>
                <dd><a href="rails_db.html">Database and Migrations</a></dd>
                <dd><a href="rails_associations_and_validations.html">Associations and Validations</a></dd>
                <dd><a href="rails_view_and_controller.html">Routing, View and Controller</a></dd>
                <dd><a href="rails_authentication.html">Simple Authentication</a></dd>
                <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                <dd><a href="javascript_and_ajax.html">Rails and old Javascript</a></dd>
                <dd><a href="javascript_webpack_frontend.html">Rails and Webpack</a></dd>
                <dd><a href="testing.html">Getting started with Testing</a></dd>
                <dd><a href="rails_gems.html">Ruby Gems for your Rails Project</a></dd>
                <dd><a href="rest-api.html">REST API</a></dd>
                <dd><a href="graphql-api.html">GraphQL API</a></dd>
                <dd><a href="rails_websockets.html">Websocket in Rails</a></dd>
                <dd><a href="jobs_and_tasks.html">Jobs and Tasks in Rails</a></dd>
                <dd><a href="refactoring_rails.html">Refactoring Rails</a></dd>
                <dd><a href="rails_security.html">Rails Security</a></dd>
                <dt>Overarching Concerns</dt>
                <dd><a href="security.html">Security</a></dd>
                <dd><a href="adv_authentication.html">Advanced Authentication</a></dd>
                <dd><a href="caching.html">Caching</a></dd>
                <dd><a href="advanced_testing.html">Advanced Testing</a></dd>
                <dd><a href="internationalization.html">Internationalization (I18n)</a></dd>
                <dt>Nodes.js</dt>
                <dd><a href="node_vs_rails.html">Node vs. Rails</a></dd>
                <dd><a href="node_basics.html">Node Basics</a></dd>
                <dd><a href="node_websockets.html">Node Websockets</a></dd>
                <dd><a href="node_express.html">Node Web App</a></dd>
                <dd><a href="node_cluster.html">Scaling Node</a></dd>
                <dt>Next.js</dt>
                <dd><a href="nextjs.html">Next.js</a></dd>
              </dl>
              <dl class="R">
              </dl>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2 id="preheader">no heading</h2>
                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#to-be-written">To Be Written</a></li>
<li>
<a href="#an-investigation-into-declarations">An investigation into Declarations:</a>

<ul>
<li><a href="#online-resources">Online Resources</a></li>
<li><a href="#books">Books</a></li>
</ul>
</li>
</ol>

          </div>

      <div class="rest_header">
        
      </div>
    </div>
  </div>


  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <div class='slide'><a id='slide-0'></a>
</div>
<div class='slide'>
<a class='slide_break' id='slide-1' href='slides_ruby_oo.html#slide-1'>▻</a>
<h2>Ruby Object Orientation</h2><p>This guide will take a closer look at objects, classes and modules in Ruby.</p><p>After finishing this guide you will</p>
<ul>
<li>know how to write object methods and use object variables (properties)</li>
<li>know how to write class methods and use class variables (properties)</li>
</ul>

</div>
<div class='slide'>
<a class='slide_break' id='slide-2' href='slides_ruby_oo.html#slide-2'>▻</a>
<hr>
</div>
<div class='slide'>
<a class='slide_break' id='slide-3' href='slides_ruby_oo.html#slide-3'>▻</a>
<h3 id="to-be-written"><a class="anchorlink" href="#to-be-written">1 To Be Written</a></h3></div>
<div class='slide'>
<a class='slide_break' id='slide-4' href='slides_ruby_oo.html#slide-4'>▻</a>
<h3 id="an-investigation-into-declarations"><a class="anchorlink" href="#an-investigation-into-declarations">2 An investigation into Declarations:</a></h3><p>In <a href="rails_associations_and_validations.html">Rails: Associations and Validations</a> we learned that Validation are declared in the model:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Tweet</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates_presence_of</span> <span class="ss">:status</span>
<span class="k">end</span>
</code></pre>
</div>
<p>But what is really happening here?</p><p><code>validates_presence_of</code> is called when the class is defined. it is called only once.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Ruby</span>
  <span class="k">def</span> <span class="nf">validates_presence_of</span> <span class="n">x</span>
    <span class="nb">puts</span> <span class="s2">"I should really check for property </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="n">validates_presence_of</span> <span class="ss">:color</span>
<span class="k">end</span>

<span class="c1"># in `&lt;class:Ruby&gt;': undefined method `validates_presence_of' for Ruby:Class (NoMethodError)</span>
</code></pre>
</div>
<p><code>validates_presence_of</code> cannot be a normal method, because such a method is not defined yet
when the class is defined. so it needs to be a class method.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Ruby</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">validates_presence_of</span> <span class="n">x</span>
    <span class="nb">puts</span> <span class="s2">"I should really check for property </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="n">validates_presence_of</span> <span class="ss">:color</span>
<span class="k">end</span>
</code></pre>
</div>
<p>....</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ValidatableStuff</span>
  <span class="nb">attr_accessor</span> <span class="ss">:data</span>
  <span class="nb">attr_accessor</span> <span class="ss">:errors</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">validates_presence_of</span> <span class="n">x</span>
    <span class="nb">puts</span> <span class="s2">"the class </span><span class="si">#{</span><span class="nb">self</span><span class="si">}</span><span class="s2"> should really check for </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2"> - but how?"</span>
    <span class="vc">@@validator_for</span> <span class="o">=</span> <span class="n">x</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="vi">@data</span> <span class="o">=</span> <span class="n">data</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">save</span>
    <span class="nb">puts</span> <span class="s2">"I am trying to save the data of a </span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2"> Object. the data is </span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">data</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">if</span> <span class="nb">self</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">keys</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span> <span class="vc">@@validator_for</span> <span class="p">)</span>
      <span class="nb">puts</span> <span class="s2">"this is ok, </span><span class="si">#{</span><span class="vc">@@validator_for</span><span class="si">}</span><span class="s2"> is set"</span>
      <span class="k">return</span> <span class="kp">true</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"this is not ok, </span><span class="si">#{</span><span class="vc">@@validator_for</span><span class="si">}</span><span class="s2"> needs to be set"</span>
      <span class="nb">self</span><span class="p">.</span><span class="nf">errors</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="vc">@@validator_for</span><span class="si">}</span><span class="s2"> needs to be set"</span>
      <span class="k">return</span> <span class="kp">false</span>
    <span class="k">end</span>

  <span class="k">end</span>
<span class="k">end</span>


<span class="k">class</span> <span class="nc">Ruby</span> <span class="o">&lt;</span> <span class="no">ValidatableStuff</span>
  <span class="k">def</span> <span class="nf">x</span>
  <span class="k">end</span>

  <span class="n">x</span>
  <span class="n">validates_presence_of</span> <span class="ss">:color</span>
<span class="k">end</span>


<span class="k">class</span> <span class="nc">Diamond</span> <span class="o">&lt;</span> <span class="no">ValidatableStuff</span>
  <span class="n">validates_presence_of</span> <span class="ss">:carat</span>
<span class="k">end</span>

<span class="n">r1</span> <span class="o">=</span> <span class="no">Ruby</span><span class="p">.</span><span class="nf">new</span>
<span class="k">if</span> <span class="n">r1</span><span class="p">.</span><span class="nf">save</span>
  <span class="nb">puts</span> <span class="s2">"saved"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"errors: </span><span class="si">#{</span><span class="n">r1</span><span class="p">.</span><span class="nf">errors</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">r2</span> <span class="o">=</span> <span class="no">Ruby</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">color: </span><span class="s1">'yellow'</span><span class="p">)</span>
<span class="n">r2</span><span class="p">.</span><span class="nf">save</span>

<span class="n">d1</span> <span class="o">=</span> <span class="no">Diamond</span><span class="p">.</span><span class="nf">new</span>
<span class="n">d1</span><span class="p">.</span><span class="nf">save</span>

<span class="n">d2</span> <span class="o">=</span> <span class="no">Diamond</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">carat: </span><span class="mi">10</span><span class="p">)</span>
<span class="n">d2</span><span class="p">.</span><span class="nf">save</span>
</code></pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' id='slide-5' href='slides_ruby_oo.html#slide-5'>▻</a>
<h4 id="online-resources"><a class="anchorlink" href="#online-resources">2.1 Online Resources</a></h4>
<ul>
<li><a href="http://rubylearning.com/satishtalim/tutorial.html">learningruby.com tutorial</a></li>
</ul>
</div>
<div class='slide'>
<a class='slide_break' id='slide-6' href='slides_ruby_oo.html#slide-6'>▻</a>
<h4 id="books"><a class="anchorlink" href="#books">2.2 Books</a></h4>
<ul>
<li><a href="https://www.poodr.com/">Metz, Sandy(2017): Practical Object-Oriented Design in Ruby</a></li>
</ul>
</div>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p class="copyright">published under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> in 2012-2023 by <a href="https://brigitte-jellinek.at">Brigitte Jellinek</a>.
      </p><p>If you want to contribute: <a href="https://github.com/backend-development/backend-development-textbook/fork">fork the source on github</a>
      </p>
    </div>
  </div>

  <script src="javascripts/jquery.min.js"></script>
  <script src="javascripts/guides.js"></script>
  <script>
    SyntaxHighlighter.all()
    $(guidesIndex.bind);
    $(document).ready(function(){
      let hash = document.location.hash;
      if(! hash) return;
      document.getElementById(hash.substr(1)).scrollIntoView(true);
    })
  </script>
  </body>
</html>
